<!doctype html>
<html>
  <body style="font-family: system-ui, sans-serif; padding: 16px;">
    <h3>Settings</h3>
    <p>Store your API key and backend URL (saved in your Google accountâ€™s User Properties).</p>

    <!-- Input for backend API URL -->
    <label style="display:block; margin-top:8px;">
      API URL
      <input id="apiUrl" style="width:100%;" placeholder="https://your-backend.example.com/coach">
    </label>

    <!-- Input for API Key -->
    <label style="display:block; margin-top:8px;">
      API Key
      <input id="apiKey" style="width:100%;" placeholder="sk-...">
    </label>

    <!-- Save button -->
    <div style="margin-top:12px;">
      <button onclick="save()">Save</button>
    </div>

    <script>
      // Save values to Apps Script backend (User Properties)
      function save() {
        const apiUrl = document.getElementById('apiUrl').value.trim();
        const apiKey = document.getElementById('apiKey').value.trim();

        google.script.run.withSuccessHandler(function(){
          // Close dialog after saving
          google.script.host.close();
        }).saveSettings({ apiKey: apiKey, apiUrl: apiUrl });
      }
    </script>
  </body>
</html>
